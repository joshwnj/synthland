parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({6:[function(require,module,exports) {

},{"./assets/FT2.woff":[["FT2.a5155d03.woff",40],40]}],7:[function(require,module,exports) {
module.exports="Basement.d69de001.m4a";
},{}],8:[function(require,module,exports) {
module.exports="impulse_guitar.58e85476.wav";
},{}],26:[function(require,module,exports) {
function n(...n){for(var e=0;e<n.length-1;e+=1)n[e].connect(n[e+1]);return n[0]}n.obj=function(e){return n(...Object.values(e)),e},module.exports=n;
},{}],31:[function(require,module,exports) {
const e=["attack","delayTime","detune","frequency","gain","knee","pan","playbackRate","ratio","reduction","release","threshold","Q"];module.exports=function(t,n){return Object.keys(n).forEach(a=>{const o=n[a];e.indexOf(a)>=0?t[a].value=o:t[a]=o}),t},module.exports.delta=function(t,n){return Object.keys(n).forEach(a=>{const o=n[a];e.indexOf(a)>=0?t[a].value+=o:t[a]+=o}),t};
},{}],27:[function(require,module,exports) {
const e=require("./setParams");function n(e,n){return n.type,e[`create${n.type}`]()}module.exports=function(o,t){let c;const r={};return Object.keys(t).forEach(a=>{const s=t[a];if(s instanceof AudioParam||s instanceof AudioNode)return void c.connect(s);const i=s.node||n(o,s);i instanceof AudioNode&&(r[a]=i),s.params&&e(i,s.params),c&&c.connect(i),c=i}),r};
},{"./setParams":31}],28:[function(require,module,exports) {
function n(n,e,r){return n+r*(e-n)}function e(n,e,r){return n<e?r-1:n>=r?e:n}module.exports={percentRange:n,wrap:e};
},{}],29:[function(require,module,exports) {
module.exports=function(e,i){let o;return i.forEach(i=>{if(!i.time&&o||(o=i.time||0),!i.value)return i.linearTo?(e.linearRampToValueAtTime(i.linearTo,o+i.duration),void(o+=i.duration)):i.expTo?(e.exponentialRampToValueAtTime(i.expTo,o+i.duration),void(o+=i.duration)):void 0;e.setValueAtTime(i.value,o)}),o};
},{}],30:[function(require,module,exports) {
function n(n,t){return Math.floor(Math.random()*(t-n))+n}function t(n,t){return n+Math.random()*(t-n)}function o(t){return t[n(0,t.length)]}module.exports={inRange:n,floatInRange:t,from:o};
},{}],12:[function(require,module,exports) {
module.exports.connectAll=require("./connectAll"),module.exports.createNodes=require("./createNodes"),module.exports.num=require("./num"),module.exports.paramTimeline=require("./paramTimeline"),module.exports.rand=require("./rand"),module.exports.setParams=require("./setParams");
},{"./connectAll":26,"./createNodes":27,"./num":28,"./paramTimeline":29,"./rand":30,"./setParams":31}],24:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=require("wakit"),i=t.connectAll,o=t.createNodes,r=t.setParams,c=t.paramTimeline,a=t.num,s=t.rand,u=0,d=exports.Filter=function(){function t(e,i){var o=this;n(this,t),this._id=++u,this.node=ac.createBiquadFilter(),this.children=i,this.children.forEach(function(e){return e.connect(o.node)}),this.update(e)}return e(t,[{key:"update",value:function(e){var n=this;["frequency","gain","Q"].forEach(function(t){void 0!==e[t]&&n.updateParam(t,e[t])}),e.type&&(this.node.type=e.type)}},{key:"updateParam",value:function(e,n){var t=this;(Array.isArray(n)?n:[n]).forEach(function(n){"number"==typeof n?t[e]=n:n.connect&&(n.connect(t[e]),t.children.push(n))})}},{key:"connect",value:function(e){this.node.connect(e)}},{key:"disconnect",value:function(){this.node.disconnect(),delete this.node}},{key:"start",value:function(e){this.children.forEach(function(n){return n.start(e)})}},{key:"stop",value:function(e){this.children.forEach(function(n){return n.stop(e)})}},{key:"frequency",get:function(){return this.node.frequency},set:function(e){this.node.frequency.value=e}},{key:"gain",get:function(){return this.node.gain},set:function(e){this.node.gain.value=e}},{key:"Q",get:function(){return this.node.Q},set:function(e){this.node.Q.value=e}}]),t}(),h=exports.Osc=function(){function t(e){n(this,t),this._id=++u,this.nodes=o(ac,{osc:{type:"Oscillator"},amp:{type:"Gain"}}),this.children=[],this.update(e)}return e(t,[{key:"update",value:function(e){var n=this;["detune","frequency","gain"].forEach(function(t){void 0!==e[t]&&n.updateParam(t,e[t])}),e.type&&(this.nodes.osc.type=e.type)}},{key:"updateParam",value:function(e,n){var t=this;(Array.isArray(n)?n:[n]).forEach(function(n){"number"==typeof n?t[e]=n:n.connect&&(n.connect(t[e]),n instanceof ConstantSourceNode||t.children.push(n))})}},{key:"connect",value:function(e){this.nodes.amp.connect(e)}},{key:"disconnect",value:function(){var e=this;this.disconnected||(this.children.forEach(function(n,t){n.disconnect(),delete e.children[t]}),this.nodes.amp.disconnect(),this.nodes.osc.disconnect(),delete this.nodes.amp,delete this.nodes.osc,this.disconnected=!0)}},{key:"start",value:function(e){return this.children.forEach(function(n){return n.start(e)}),this.nodes.osc.start(e),e}},{key:"stop",value:function(e){var n=this;this.children.forEach(function(n){n.stop(e)});var t=setInterval(function(){n.disconnected?clearInterval(t):n.gain.value<.002&&(n.nodes.osc.stop(),n.disconnect(),clearInterval(t))},500)}},{key:"detune",get:function(){return this.nodes.osc.detune},set:function(e){this.nodes.osc.detune.value=e}},{key:"frequency",get:function(){return this.nodes.osc.frequency},set:function(e){this.nodes.osc.frequency.value=e}},{key:"gain",get:function(){return this.nodes.amp.gain},set:function(e){this.nodes.amp.gain.value=e}}]),t}(),f=exports.Env=function(){function t(e){n(this,t),this._id=++u,this.props=e,this.param=null}return e(t,[{key:"connect",value:function(e){this.param=e}},{key:"disconnect",value:function(){delete this.param}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ac.currentTime,n=this.props,t=this.param;if(!t)return e;var i=t.value;return c(t,[{time:e,value:n.from||1e-4},{linearTo:n.to||i,duration:n.attack||.1}])}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ac.currentTime,n=this.props,t=this.param;if(!t)return e;if(void 0===n.release)return 1/0;var i=t.value;return t.cancelScheduledValues(e),c(t,[{time:e,value:n.to||i},{linearTo:n.from||1e-4,duration:n.release||.1}])}}]),t}();
},{"wakit":12}],25:[function(require,module,exports) {
"use strict";module.exports=function(t){return Math.round(69+12*Math.log2(t/440))};
},{}],9:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./audio-components"),n=require("wakit"),t=n.connectAll,a=n.createNodes,r=n.setParams,o=n.paramTimeline,c=n.num,u=n.rand,w=function(e){return 440*Math.pow(2,(e-69)/12)},i=require("frequency-to-midi-note-number");window.ac||(window.ac=new AudioContext);var f=window,s=f.ac,l=["sine","triangle","sawtooth"],m=[];m[0]=function(n,t){var a=n.detune,r=(n.time,n.duration);return new e.Filter({type:"lowpass",frequency:[2e4,new e.Env({attack:.5*r})],gain:1,Q:1},[new e.Osc({type:u.from(l),detune:[new e.Env({attack:.5*r,from:a,to:a-10}),t],gain:new e.Env({attack:.9*r,release:.5*r,to:.3}),frequency:[110,new e.Osc({type:u.from(l),frequency:55,detune:[new e.Env({attack:.5*r,from:a,to:a-10}),t],gain:[27.5*Math.pow(2,(i(110)-60)/12*-2),new e.Env({attack:.5*r,release:2*r}),new e.Osc({frequency:[u.floatInRange(.1,5),new e.Env({attack:.5*r})],gain:[100,new e.Env({attack:3})]})]})]})])},m[1]=function(n,t){n.detune,n.time;var a=n.duration;return new e.Filter({type:"highpass",frequency:new e.Env({attack:.5*a,from:1e4,to:0}),Q:1},[new e.Osc({type:u.from(l),gain:new e.Env({attack:.9*a,release:.5*a,to:.1}),detune:t,frequency:[110,new e.Osc({type:u.from(l),frequency:330,detune:t,gain:[330*Math.pow(2,(i(110)-60)/12*-2),new e.Env({attack:.5*a,release:2*a}),new e.Osc({frequency:[u.floatInRange(.1,5),new e.Env({attack:.5*a})],gain:[100,new e.Env({attack:3})]})]})]})])},m[2]=function(n,t){var a=n.detune,r=(n.time,n.duration),o=u.from([110,220]),c=u.from([.25,.5,1,2,4]),w=u.floatInRange(.25,2),f=u.floatInRange(-2,2);return new e.Filter({type:u.from(["notch","lowpass"]),frequency:new e.Env({attack:r,from:2e4,to:0}),gain:50,Q:1},[new e.Osc({type:u.from(l),detune:[a,t],gain:new e.Env({attack:.9*r,release:.5*r,to:.1}),frequency:[o,new e.Osc({type:u.from(l),frequency:o*c,detune:[a,t],gain:[o*w*Math.pow(2,(i(o)-60)/12*f),new e.Env({attack:.5*r,release:2*r}),new e.Osc({frequency:[u.floatInRange(.1,5),new e.Env({attack:.5*r})],gain:[u.inRange(1,100),new e.Env({attack:.3*r})]})]})]})])},m[3]=function(n,t){var a=n.detune,r=(n.time,n.duration),o=u.from([220,440,880]);u.from([.25,.5,1,2,4]),u.floatInRange(.25,2),u.floatInRange(-2,2);return new e.Filter({type:u.from(["notch","highpass","lowpass"]),frequency:[15e3,new e.Osc({frequency:[u.floatInRange(.1,5),new e.Env({attack:.5*r})],gain:[1e4,new e.Env({attack:.3*r})]})],Q:1},[new e.Osc({type:u.from(l),detune:[a,t],gain:new e.Env({attack:u.floatInRange(.01,.5*r),release:1.5*r,to:.1}),frequency:o})])},exports.default=m;
},{"./audio-components":24,"wakit":12,"frequency-to-midi-note-number":25}],13:[function(require,module,exports) {
var define;
var e;!function(){var t,a,i=function(e,t){e.value=t},s=Object.create(null,{activate:{writable:!0,value:function(e){e?(this.input.disconnect(),this.input.connect(this.activateNode),this.activateCallback&&this.activateCallback(e)):(this.input.disconnect(),this.input.connect(this.output))}},bypass:{get:function(){return this._bypass},set:function(e){this._lastBypassValue!==e&&(this._bypass=e,this.activate(!e),this._lastBypassValue=e)}},connect:{value:function(e){this.output.connect(e)}},disconnect:{value:function(e){this.output.disconnect(e)}},connectInOrder:{value:function(e){for(var t=e.length-1;t--;){if(!e[t].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",e[t]);e[t+1].input?e[t].connect(e[t+1].input):e[t].connect(e[t+1])}}},getDefaults:{value:function(){var e={};for(var t in this.defaults)e[t]=this.defaults[t].value;return e}},automate:{value:function(e,a,i,s){var n,u=s?~~(s/1e3):t.currentTime,o=i?~~(i/1e3):0,l=this.defaults[e],r=this[e];r?l.automatable?(i?(n="linearRampToValueAtTime",r.cancelScheduledValues(u),r.setValueAtTime(r.value,u)):n="setValueAtTime",r[n](a,o+u)):r=a:console.error("Invalid Property for "+this.name)}}}),n="float",u="boolean",o="int";function l(e){if(!(this instanceof l))return new l(e);var i="undefined"==typeof window?{}:window;if(i.AudioContext||(i.AudioContext=i.webkitAudioContext),e||(console.log("tuna.js: Missing audio context! Creating a new context for you."),e=i.AudioContext&&new i.AudioContext),!e)throw new Error("Tuna cannot initialize because this environment does not support web audio.");!function(e){if(!0===e.__connectified__)return;var t=e.createGain(),a=Object.getPrototypeOf(Object.getPrototypeOf(t)),i=a.connect;a.connect=function(){var e=arguments[0];return arguments[0]=s.isPrototypeOf?s.isPrototypeOf(e)?e.input:e:e.input||e,i.apply(this,arguments),e},e.__connectified__=!0}(e),t=e,a=this}function r(e){return Math.max(0,Math.round(100*Math.pow(2,e/6))/100)}function h(e,t){var a,i,s,n=0,u=0,o=0;return a=e.toExponential().match(/^.\.?(.*)e(.+)$/),n=parseInt(a[2],10)-(a[1]+"").length,a=t.toExponential().match(/^.\.?(.*)e(.+)$/),(s=parseInt(a[2],10)-(a[1]+"").length)>n&&(n=s),i=e%t,n<-100||n>20?(u=Math.round(Math.log(i)/Math.log(10)),(i/(o=Math.pow(10,u))).toFixed(u-n)*o):parseFloat(i.toFixed(-n))}function c(e){return 0===e?1:Math.abs(e)/e}function f(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function p(e,t){return void 0===e?t:e}"undefined"!=typeof module&&module.exports?module.exports=l:"function"==typeof e?window.define("Tuna",function(){return l}):window.Tuna=l,l.prototype.Bitcrusher=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=t.createGain(),this.activateNode=t.createGain(),this.processor=t.createScriptProcessor(this.bufferSize,1,1),this.output=t.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var a,i,s,n,u,o=0,l=0;this.processor.onaudioprocess=function(e){for(a=e.inputBuffer.getChannelData(0),i=e.outputBuffer.getChannelData(0),s=Math.pow(.5,this.bits),u=a.length,n=0;n<u;n++)(o+=this.normfreq)>=1&&(o-=1,l=s*Math.floor(a[n]/s+.5)),i[n]=l},this.bits=e.bits||this.defaults.bits.value,this.normfreq=p(e.normfreq,this.defaults.normfreq.value),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Bitcrusher.prototype=Object.create(s,{name:{value:"Bitcrusher"},defaults:{writable:!0,value:{bits:{value:4,min:1,max:16,automatable:!1,type:o},bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:o},bypass:{value:!1,automatable:!1,type:u},normfreq:{value:.1,min:1e-4,max:1,automatable:!1,type:n}}},bits:{enumerable:!0,get:function(){return this.processor.bits},set:function(e){this.processor.bits=e}},normfreq:{enumerable:!0,get:function(){return this.processor.normfreq},set:function(e){this.processor.normfreq=e}}}),l.prototype.Cabinet=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.activateNode=t.createGain(),this.convolver=this.newConvolver(e.impulsePath||"../impulses/impulse_guitar.wav"),this.makeupNode=t.createGain(),this.output=t.createGain(),this.activateNode.connect(this.convolver.input),this.convolver.output.connect(this.makeupNode),this.makeupNode.connect(this.output),this.makeupGain=p(e.makeupGain,this.defaults.makeupGain.value),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Cabinet.prototype=Object.create(s,{name:{value:"Cabinet"},defaults:{writable:!0,value:{makeupGain:{value:1,min:0,max:20,automatable:!0,type:n},bypass:{value:!1,automatable:!1,type:u}}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=e}},newConvolver:{value:function(e){return new a.Convolver({impulse:e,dryLevel:0,wetLevel:1})}}}),l.prototype.Chorus=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.attenuator=this.activateNode=t.createGain(),this.splitter=t.createChannelSplitter(2),this.delayL=t.createDelay(),this.delayR=t.createDelay(),this.feedbackGainNodeLR=t.createGain(),this.feedbackGainNodeRL=t.createGain(),this.merger=t.createChannelMerger(2),this.output=t.createGain(),this.lfoL=new a.LFO({target:this.delayL.delayTime,callback:i}),this.lfoR=new a.LFO({target:this.delayR.delayTime,callback:i}),this.input.connect(this.attenuator),this.attenuator.connect(this.output),this.attenuator.connect(this.splitter),this.splitter.connect(this.delayL,0),this.splitter.connect(this.delayR,1),this.delayL.connect(this.feedbackGainNodeLR),this.delayR.connect(this.feedbackGainNodeRL),this.feedbackGainNodeLR.connect(this.delayR),this.feedbackGainNodeRL.connect(this.delayL),this.delayL.connect(this.merger,0,0),this.delayR.connect(this.merger,0,1),this.merger.connect(this.output),this.feedback=p(e.feedback,this.defaults.feedback.value),this.rate=p(e.rate,this.defaults.rate.value),this.delay=p(e.delay,this.defaults.delay.value),this.depth=p(e.depth,this.defaults.depth.value),this.lfoR.phase=Math.PI/2,this.attenuator.gain.value=.6934,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Chorus.prototype=Object.create(s,{name:{value:"Chorus"},defaults:{writable:!0,value:{feedback:{value:.4,min:0,max:.95,automatable:!1,type:n},delay:{value:.0045,min:0,max:1,automatable:!1,type:n},depth:{value:.7,min:0,max:1,automatable:!1,type:n},rate:{value:1.5,min:0,max:8,automatable:!1,type:n},bypass:{value:!1,automatable:!1,type:u}}},delay:{enumerable:!0,get:function(){return this._delay},set:function(e){this._delay=2*Math.pow(10,e)*2e-4,this.lfoL.offset=this._delay,this.lfoR.offset=this._delay,this._depth=this._depth}},depth:{enumerable:!0,get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._depth*this._delay,this.lfoR.oscillation=this._depth*this._delay}},feedback:{enumerable:!0,get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeLR.gain.value=this._feedback,this.feedbackGainNodeRL.gain.value=this._feedback}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}}}),l.prototype.Compressor=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.compNode=this.activateNode=t.createDynamicsCompressor(),this.makeupNode=t.createGain(),this.output=t.createGain(),this.compNode.connect(this.makeupNode),this.makeupNode.connect(this.output),this.automakeup=p(e.automakeup,this.defaults.automakeup.value),this.makeupGain=p(e.makeupGain,this.defaults.makeupGain.value),this.threshold=p(e.threshold,this.defaults.threshold.value),this.release=p(e.release,this.defaults.release.value),this.attack=p(e.attack,this.defaults.attack.value),this.ratio=e.ratio||this.defaults.ratio.value,this.knee=p(e.knee,this.defaults.knee.value),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Compressor.prototype=Object.create(s,{name:{value:"Compressor"},defaults:{writable:!0,value:{threshold:{value:-20,min:-60,max:0,automatable:!0,type:n},release:{value:250,min:10,max:2e3,automatable:!0,type:n},makeupGain:{value:1,min:1,max:100,automatable:!0,type:n},attack:{value:1,min:0,max:1e3,automatable:!0,type:n},ratio:{value:4,min:1,max:50,automatable:!0,type:n},knee:{value:5,min:0,max:40,automatable:!0,type:n},automakeup:{value:!1,automatable:!1,type:u},bypass:{value:!1,automatable:!1,type:u}}},computeMakeup:{value:function(){var e=this.compNode;return-(e.threshold.value-e.threshold.value/e.ratio.value)/4}},automakeup:{enumerable:!0,get:function(){return this._automakeup},set:function(e){this._automakeup=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},threshold:{enumerable:!0,get:function(){return this.compNode.threshold},set:function(e){this.compNode.threshold.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},ratio:{enumerable:!0,get:function(){return this.compNode.ratio},set:function(e){this.compNode.ratio.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},knee:{enumerable:!0,get:function(){return this.compNode.knee},set:function(e){this.compNode.knee.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},attack:{enumerable:!0,get:function(){return this.compNode.attack},set:function(e){this.compNode.attack.value=e/1e3}},release:{enumerable:!0,get:function(){return this.compNode.release},set:function(e){this.compNode.release.value=e/1e3}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=r(e)}}}),l.prototype.Convolver=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.activateNode=t.createGain(),this.convolver=t.createConvolver(),this.dry=t.createGain(),this.filterLow=t.createBiquadFilter(),this.filterHigh=t.createBiquadFilter(),this.wet=t.createGain(),this.output=t.createGain(),this.activateNode.connect(this.filterLow),this.activateNode.connect(this.dry),this.filterLow.connect(this.filterHigh),this.filterHigh.connect(this.convolver),this.convolver.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.dryLevel=p(e.dryLevel,this.defaults.dryLevel.value),this.wetLevel=p(e.wetLevel,this.defaults.wetLevel.value),this.highCut=e.highCut||this.defaults.highCut.value,this.buffer=e.impulse||"../impulses/ir_rev_short.wav",this.lowCut=e.lowCut||this.defaults.lowCut.value,this.level=p(e.level,this.defaults.level.value),this.filterHigh.type="lowpass",this.filterLow.type="highpass",this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Convolver.prototype=Object.create(s,{name:{value:"Convolver"},defaults:{writable:!0,value:{highCut:{value:22050,min:20,max:22050,automatable:!0,type:n},lowCut:{value:20,min:20,max:22050,automatable:!0,type:n},dryLevel:{value:1,min:0,max:1,automatable:!0,type:n},wetLevel:{value:1,min:0,max:1,automatable:!0,type:n},level:{value:1,min:0,max:1,automatable:!0,type:n},bypass:{value:!1,automatable:!1,type:u}}},lowCut:{get:function(){return this.filterLow.frequency},set:function(e){this.filterLow.frequency.value=e}},highCut:{get:function(){return this.filterHigh.frequency},set:function(e){this.filterHigh.frequency.value=e}},level:{get:function(){return this.output.gain},set:function(e){this.output.gain.value=e}},dryLevel:{get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},wetLevel:{get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},buffer:{enumerable:!1,get:function(){return this.convolver.buffer},set:function(e){var a=this.convolver,i=new XMLHttpRequest;e?(i.open("GET",e,!0),i.responseType="arraybuffer",i.onreadystatechange=function(){4===i.readyState&&(i.status<300&&i.status>199||302===i.status)&&t.decodeAudioData(i.response,function(e){a.buffer=e},function(e){e&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+e)})},i.send(null)):console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),l.prototype.Delay=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.activateNode=t.createGain(),this.dry=t.createGain(),this.wet=t.createGain(),this.filter=t.createBiquadFilter(),this.delay=t.createDelay(10),this.feedbackNode=t.createGain(),this.output=t.createGain(),this.activateNode.connect(this.delay),this.activateNode.connect(this.dry),this.delay.connect(this.filter),this.filter.connect(this.feedbackNode),this.feedbackNode.connect(this.delay),this.feedbackNode.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.delayTime=e.delayTime||this.defaults.delayTime.value,this.feedback=p(e.feedback,this.defaults.feedback.value),this.wetLevel=p(e.wetLevel,this.defaults.wetLevel.value),this.dryLevel=p(e.dryLevel,this.defaults.dryLevel.value),this.cutoff=e.cutoff||this.defaults.cutoff.value,this.filter.type="lowpass",this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Delay.prototype=Object.create(s,{name:{value:"Delay"},defaults:{writable:!0,value:{delayTime:{value:100,min:20,max:1e3,automatable:!1,type:n},feedback:{value:.45,min:0,max:.9,automatable:!0,type:n},cutoff:{value:2e4,min:20,max:2e4,automatable:!0,type:n},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:n},dryLevel:{value:1,min:0,max:1,automatable:!0,type:n},bypass:{value:!1,automatable:!1,type:u}}},delayTime:{enumerable:!0,get:function(){return this.delay.delayTime},set:function(e){this.delay.delayTime.value=e/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},dryLevel:{enumerable:!0,get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},feedback:{enumerable:!0,get:function(){return this.feedbackNode.gain},set:function(e){this.feedbackNode.gain.value=e}},cutoff:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),l.prototype.Filter=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.activateNode=t.createGain(),this.filter=t.createBiquadFilter(),this.output=t.createGain(),this.activateNode.connect(this.filter),this.filter.connect(this.output),this.frequency=e.frequency||this.defaults.frequency.value,this.Q=e.resonance||this.defaults.Q.value,this.filterType=p(e.filterType,this.defaults.filterType.value),this.gain=p(e.gain,this.defaults.gain.value),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Filter.prototype=Object.create(s,{name:{value:"Filter"},defaults:{writable:!0,value:{frequency:{value:800,min:20,max:22050,automatable:!0,type:n},Q:{value:1,min:.001,max:100,automatable:!0,type:n},gain:{value:0,min:-40,max:40,automatable:!0,type:n},bypass:{value:!1,automatable:!1,type:u},filterType:{value:"lowpass",automatable:!1,type:"string"}}},filterType:{enumerable:!0,get:function(){return this.filter.type},set:function(e){this.filter.type=e}},Q:{enumerable:!0,get:function(){return this.filter.Q},set:function(e){this.filter.Q.value=e}},gain:{enumerable:!0,get:function(){return this.filter.gain},set:function(e){this.filter.gain.value=e}},frequency:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),l.prototype.Gain=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.activateNode=t.createGain(),this.gainNode=t.createGain(),this.output=t.createGain(),this.activateNode.connect(this.gainNode),this.gainNode.connect(this.output),this.gain=p(e.gain,this.defaults.gain.value),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Gain.prototype=Object.create(s,{name:{value:"Gain"},defaults:{writable:!0,value:{bypass:{value:!1,automatable:!1,type:u},gain:{value:1,automatable:!0,type:n}}},gain:{enumerable:!0,get:function(){return this.gainNode.gain},set:function(e){this.gainNode.gain.value=e}}}),l.prototype.MoogFilter=function(e){var a,i,s,n,u,o,l,r,h,c,f,v,d,m,y;e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=t.createGain(),this.activateNode=t.createGain(),this.processor=t.createScriptProcessor(this.bufferSize,1,1),this.output=t.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output),a=i=s=n=u=o=l=r=0,this.processor.onaudioprocess=function(e){for(h=e.inputBuffer.getChannelData(0),c=e.outputBuffer.getChannelData(0),f=1.16*this.cutoff,y=f*f*.35013*(f*f),v=this.resonance*(1-.15*f*f),m=h.length,d=0;d<m;d++)h[d]-=r*v,h[d]*=y,u=h[d]+.3*a+(1-f)*u,a=h[d],o=u+.3*i+(1-f)*o,i=u,l=o+.3*s+(1-f)*l,s=o,r=l+.3*n+(1-f)*r,n=l,c[d]=r},this.cutoff=p(e.cutoff,this.defaults.cutoff.value),this.resonance=p(e.resonance,this.defaults.resonance.value),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.MoogFilter.prototype=Object.create(s,{name:{value:"MoogFilter"},defaults:{writable:!0,value:{bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:o},bypass:{value:!1,automatable:!1,type:u},cutoff:{value:.065,min:1e-4,max:1,automatable:!1,type:n},resonance:{value:3.5,min:0,max:4,automatable:!1,type:n}}},cutoff:{enumerable:!0,get:function(){return this.processor.cutoff},set:function(e){this.processor.cutoff=e}},resonance:{enumerable:!0,get:function(){return this.processor.resonance},set:function(e){this.processor.resonance=e}}}),l.prototype.Overdrive=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.activateNode=t.createGain(),this.inputDrive=t.createGain(),this.waveshaper=t.createWaveShaper(),this.outputDrive=t.createGain(),this.output=t.createGain(),this.activateNode.connect(this.inputDrive),this.inputDrive.connect(this.waveshaper),this.waveshaper.connect(this.outputDrive),this.outputDrive.connect(this.output),this.ws_table=new Float32Array(this.k_nSamples),this.drive=p(e.drive,this.defaults.drive.value),this.outputGain=p(e.outputGain,this.defaults.outputGain.value),this.curveAmount=p(e.curveAmount,this.defaults.curveAmount.value),this.algorithmIndex=p(e.algorithmIndex,this.defaults.algorithmIndex.value),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Overdrive.prototype=Object.create(s,{name:{value:"Overdrive"},defaults:{writable:!0,value:{drive:{value:1,min:0,max:1,automatable:!0,type:n,scaled:!0},outputGain:{value:1,min:0,max:1,automatable:!0,type:n,scaled:!0},curveAmount:{value:.725,min:0,max:1,automatable:!1,type:n},algorithmIndex:{value:0,min:0,max:5,automatable:!1,type:o},bypass:{value:!1,automatable:!1,type:u}}},k_nSamples:{value:8192},drive:{get:function(){return this.inputDrive.gain},set:function(e){this._drive=e}},curveAmount:{get:function(){return this._curveAmount},set:function(e){this._curveAmount=e,void 0===this._algorithmIndex&&(this._algorithmIndex=0),this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount,this.k_nSamples,this.ws_table),this.waveshaper.curve=this.ws_table}},outputGain:{get:function(){return this.outputDrive.gain},set:function(e){this._outputGain=r(e)}},algorithmIndex:{get:function(){return this._algorithmIndex},set:function(e){this._algorithmIndex=e,this.curveAmount=this._curveAmount}},waveshaperAlgorithms:{value:[function(e,t,a){var i,s,n=2*(e=Math.min(e,.9999))/(1-e);for(i=0;i<t;i++)s=2*i/t-1,a[i]=(1+n)*s/(1+n*Math.abs(s))},function(e,t,a){var i,s,n;for(i=0;i<t;i++)s=2*i/t-1,n=(.5*Math.pow(s+1.4,2)-1)*n>=0?5.8:1.2,a[i]=f(n)},function(e,t,a){var i,s,n,u=1-e;for(i=0;i<t;i++)n=(s=2*i/t-1)<0?-Math.pow(Math.abs(s),u+.04):Math.pow(s,u),a[i]=f(2*n)},function(e,t,a){var i,s,n,u,o=1-e>.99?.99:1-e;for(i=0;i<t;i++)s=2*i/t-1,(u=Math.abs(s))<o?n=u:u>o?n=o+(u-o)/(1+Math.pow((u-o)/(1-o),2)):u>1&&(n=u),a[i]=c(s)*n*(1/((o+1)/2))},function(e,t,a){var i,s;for(i=0;i<t;i++)s=2*i/t-1,a[i]=s<-.08905?-.75*(1-Math.pow(1-(Math.abs(s)-.032857),12)+1/3*(Math.abs(s)-.032847))+.01:s>=-.08905&&s<.320018?s*s*-6.153+3.9375*s:.630035},function(e,t,a){var i,s,n=2+Math.round(14*e),u=Math.round(Math.pow(2,n-1));for(i=0;i<t;i++)s=2*i/t-1,a[i]=Math.round(s*u)/u}]}}),l.prototype.Panner=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.activateNode=t.createGain(),this.panner=t.createStereoPanner(),this.output=t.createGain(),this.activateNode.connect(this.panner),this.panner.connect(this.output),this.pan=p(e.pan,this.defaults.pan.value),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Panner.prototype=Object.create(s,{name:{value:"Panner"},defaults:{writable:!0,value:{bypass:{value:!1,automatable:!1,type:u},pan:{value:0,min:-1,max:1,automatable:!0,type:n}}},pan:{enumerable:!0,get:function(){return this.panner.pan},set:function(e){this.panner.pan.value=e}}}),l.prototype.Phaser=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.splitter=this.activateNode=t.createChannelSplitter(2),this.filtersL=[],this.filtersR=[],this.feedbackGainNodeL=t.createGain(),this.feedbackGainNodeR=t.createGain(),this.merger=t.createChannelMerger(2),this.filteredSignal=t.createGain(),this.output=t.createGain(),this.lfoL=new a.LFO({target:this.filtersL,callback:this.callback}),this.lfoR=new a.LFO({target:this.filtersR,callback:this.callback});for(var i=this.stage;i--;)this.filtersL[i]=t.createBiquadFilter(),this.filtersR[i]=t.createBiquadFilter(),this.filtersL[i].type="allpass",this.filtersR[i].type="allpass";this.input.connect(this.splitter),this.input.connect(this.output),this.splitter.connect(this.filtersL[0],0,0),this.splitter.connect(this.filtersR[0],1,0),this.connectInOrder(this.filtersL),this.connectInOrder(this.filtersR),this.filtersL[this.stage-1].connect(this.feedbackGainNodeL),this.filtersL[this.stage-1].connect(this.merger,0,0),this.filtersR[this.stage-1].connect(this.feedbackGainNodeR),this.filtersR[this.stage-1].connect(this.merger,0,1),this.feedbackGainNodeL.connect(this.filtersL[0]),this.feedbackGainNodeR.connect(this.filtersR[0]),this.merger.connect(this.output),this.rate=p(e.rate,this.defaults.rate.value),this.baseModulationFrequency=e.baseModulationFrequency||this.defaults.baseModulationFrequency.value,this.depth=p(e.depth,this.defaults.depth.value),this.feedback=p(e.feedback,this.defaults.feedback.value),this.stereoPhase=p(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Phaser.prototype=Object.create(s,{name:{value:"Phaser"},stage:{value:4},defaults:{writable:!0,value:{rate:{value:.1,min:0,max:8,automatable:!1,type:n},depth:{value:.6,min:0,max:1,automatable:!1,type:n},feedback:{value:.7,min:0,max:1,automatable:!1,type:n},stereoPhase:{value:40,min:0,max:180,automatable:!1,type:n},baseModulationFrequency:{value:700,min:500,max:1500,automatable:!1,type:n},bypass:{value:!1,automatable:!1,type:u}}},callback:{value:function(e,t){for(var a=0;a<4;a++)e[a].frequency.value=t}},depth:{get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._baseModulationFrequency*this._depth,this.lfoR.oscillation=this._baseModulationFrequency*this._depth}},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},baseModulationFrequency:{enumerable:!0,get:function(){return this._baseModulationFrequency},set:function(e){this._baseModulationFrequency=e,this.lfoL.offset=this._baseModulationFrequency,this.lfoR.offset=this._baseModulationFrequency,this._depth=this._depth}},feedback:{get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeL.gain.value=this._feedback,this.feedbackGainNodeR.gain.value=this._feedback}},stereoPhase:{get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=h(t,2*Math.PI),this.lfoR._phase=t}}}),l.prototype.PingPongDelay=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.wet=t.createGain(),this.stereoToMonoMix=t.createGain(),this.feedbackLevel=t.createGain(),this.output=t.createGain(),this.delayLeft=t.createDelay(10),this.delayRight=t.createDelay(10),this.activateNode=t.createGain(),this.splitter=t.createChannelSplitter(2),this.merger=t.createChannelMerger(2),this.activateNode.connect(this.splitter),this.splitter.connect(this.stereoToMonoMix,0,0),this.splitter.connect(this.stereoToMonoMix,1,0),this.stereoToMonoMix.gain.value=.5,this.stereoToMonoMix.connect(this.wet),this.wet.connect(this.delayLeft),this.feedbackLevel.connect(this.wet),this.delayLeft.connect(this.delayRight),this.delayRight.connect(this.feedbackLevel),this.delayLeft.connect(this.merger,0,0),this.delayRight.connect(this.merger,0,1),this.merger.connect(this.output),this.activateNode.connect(this.output),this.delayTimeLeft=void 0!==e.delayTimeLeft?e.delayTimeLeft:this.defaults.delayTimeLeft.value,this.delayTimeRight=void 0!==e.delayTimeRight?e.delayTimeRight:this.defaults.delayTimeRight.value,this.feedbackLevel.gain.value=void 0!==e.feedback?e.feedback:this.defaults.feedback.value,this.wet.gain.value=void 0!==e.wetLevel?e.wetLevel:this.defaults.wetLevel.value,this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.PingPongDelay.prototype=Object.create(s,{name:{value:"PingPongDelay"},delayTimeLeft:{enumerable:!0,get:function(){return this._delayTimeLeft},set:function(e){this._delayTimeLeft=e,this.delayLeft.delayTime.value=e/1e3}},delayTimeRight:{enumerable:!0,get:function(){return this._delayTimeRight},set:function(e){this._delayTimeRight=e,this.delayRight.delayTime.value=e/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},feedback:{enumerable:!0,get:function(){return this.feedbackLevel.gain},set:function(e){this.feedbackLevel.gain.value=e}},defaults:{writable:!0,value:{delayTimeLeft:{value:200,min:1,max:1e4,automatable:!1,type:o},delayTimeRight:{value:400,min:1,max:1e4,automatable:!1,type:o},feedback:{value:.3,min:0,max:1,automatable:!1,type:n},wetLevel:{value:.5,min:0,max:1,automatable:!1,type:n},bypass:{value:!1,automatable:!1,type:u}}}}),l.prototype.Tremolo=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.splitter=this.activateNode=t.createChannelSplitter(2),this.amplitudeL=t.createGain(),this.amplitudeR=t.createGain(),this.merger=t.createChannelMerger(2),this.output=t.createGain(),this.lfoL=new a.LFO({target:this.amplitudeL.gain,callback:i}),this.lfoR=new a.LFO({target:this.amplitudeR.gain,callback:i}),this.input.connect(this.splitter),this.splitter.connect(this.amplitudeL,0),this.splitter.connect(this.amplitudeR,1),this.amplitudeL.connect(this.merger,0,0),this.amplitudeR.connect(this.merger,0,1),this.merger.connect(this.output),this.rate=e.rate||this.defaults.rate.value,this.intensity=p(e.intensity,this.defaults.intensity.value),this.stereoPhase=p(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.offset=1-this.intensity/2,this.lfoR.offset=1-this.intensity/2,this.lfoL.phase=this.stereoPhase*Math.PI/180,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.Tremolo.prototype=Object.create(s,{name:{value:"Tremolo"},defaults:{writable:!0,value:{intensity:{value:.3,min:0,max:1,automatable:!1,type:n},stereoPhase:{value:0,min:0,max:180,automatable:!1,type:n},rate:{value:5,min:.1,max:11,automatable:!1,type:n},bypass:{value:!1,automatable:!1,type:u}}},intensity:{enumerable:!0,get:function(){return this._intensity},set:function(e){this._intensity=e,this.lfoL.offset=1-this._intensity/2,this.lfoR.offset=1-this._intensity/2,this.lfoL.oscillation=this._intensity,this.lfoR.oscillation=this._intensity}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},stereoPhase:{enumerable:!0,get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=h(t,2*Math.PI),this.lfoR.phase=t}}}),l.prototype.WahWah=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.activateNode=t.createGain(),this.envelopeFollower=new a.EnvelopeFollower({target:this,callback:function(e,t){e.sweep=t}}),this.filterBp=t.createBiquadFilter(),this.filterPeaking=t.createBiquadFilter(),this.output=t.createGain(),this.activateNode.connect(this.filterBp),this.filterBp.connect(this.filterPeaking),this.filterPeaking.connect(this.output),this.init(),this.automode=p(e.automode,this.defaults.automode.value),this.resonance=e.resonance||this.defaults.resonance.value,this.sensitivity=p(e.sensitivity,this.defaults.sensitivity.value),this.baseFrequency=p(e.baseFrequency,this.defaults.baseFrequency.value),this.excursionOctaves=e.excursionOctaves||this.defaults.excursionOctaves.value,this.sweep=p(e.sweep,this.defaults.sweep.value),this.activateNode.gain.value=2,this.envelopeFollower.activate(!0),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.WahWah.prototype=Object.create(s,{name:{value:"WahWah"},defaults:{writable:!0,value:{automode:{value:!0,automatable:!1,type:u},baseFrequency:{value:.5,min:0,max:1,automatable:!1,type:n},excursionOctaves:{value:2,min:1,max:6,automatable:!1,type:n},sweep:{value:.2,min:0,max:1,automatable:!1,type:n},resonance:{value:10,min:1,max:100,automatable:!1,type:n},sensitivity:{value:.5,min:-1,max:1,automatable:!1,type:n},bypass:{value:!1,automatable:!1,type:u}}},automode:{get:function(){return this._automode},set:function(e){this._automode=e,e?(this.activateNode.connect(this.envelopeFollower.input),this.envelopeFollower.activate(!0)):(this.envelopeFollower.activate(!1),this.activateNode.disconnect(),this.activateNode.connect(this.filterBp))}},filterFreqTimeout:{value:0},setFilterFreq:{value:function(){try{this.filterBp.frequency.value=Math.min(22050,this._baseFrequency+this._excursionFrequency*this._sweep),this.filterPeaking.frequency.value=Math.min(22050,this._baseFrequency+this._excursionFrequency*this._sweep)}catch(e){clearTimeout(this.filterFreqTimeout),this.filterFreqTimeout=setTimeout(function(){this.setFilterFreq()}.bind(this),0)}}},sweep:{enumerable:!0,get:function(){return this._sweep},set:function(e){this._sweep=Math.pow(e>1?1:e<0?0:e,this._sensitivity),this.setFilterFreq()}},baseFrequency:{enumerable:!0,get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=50*Math.pow(10,2*e),this._excursionFrequency=Math.min(t.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},excursionOctaves:{enumerable:!0,get:function(){return this._excursionOctaves},set:function(e){this._excursionOctaves=e,this._excursionFrequency=Math.min(t.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},sensitivity:{enumerable:!0,get:function(){return this._sensitivity},set:function(e){this._sensitivity=Math.pow(10,e)}},resonance:{enumerable:!0,get:function(){return this._resonance},set:function(e){this._resonance=e,this.filterPeaking.Q=this._resonance}},init:{value:function(){this.output.gain.value=1,this.filterPeaking.type="peaking",this.filterBp.type="bandpass",this.filterPeaking.frequency.value=100,this.filterPeaking.gain.value=20,this.filterPeaking.Q.value=5,this.filterBp.frequency.value=100,this.filterBp.Q.value=1}}}),l.prototype.EnvelopeFollower=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.jsNode=this.output=t.createScriptProcessor(this.buffersize,1,1),this.input.connect(this.output),this.attackTime=p(e.attackTime,this.defaults.attackTime.value),this.releaseTime=p(e.releaseTime,this.defaults.releaseTime.value),this._envelope=0,this.target=e.target||{},this.callback=e.callback||function(){},this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.EnvelopeFollower.prototype=Object.create(s,{name:{value:"EnvelopeFollower"},defaults:{value:{attackTime:{value:.003,min:0,max:.5,automatable:!1,type:n},releaseTime:{value:.5,min:0,max:.5,automatable:!1,type:n},bypass:{value:!1,automatable:!1,type:u}}},buffersize:{value:256},envelope:{value:0},sampleRate:{value:44100},attackTime:{enumerable:!0,get:function(){return this._attackTime},set:function(e){this._attackTime=e,this._attackC=Math.exp(-1/this._attackTime*this.sampleRate/this.buffersize)}},releaseTime:{enumerable:!0,get:function(){return this._releaseTime},set:function(e){this._releaseTime=e,this._releaseC=Math.exp(-1/this._releaseTime*this.sampleRate/this.buffersize)}},callback:{get:function(){return this._callback},set:function(e){"function"==typeof e?this._callback=e:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){this.activated=e,e?(this.jsNode.connect(t.destination),this.jsNode.onaudioprocess=this.returnCompute(this)):(this.jsNode.disconnect(),this.jsNode.onaudioprocess=null),this.activateCallback&&this.activateCallback(e)}},returnCompute:{value:function(e){return function(t){e.compute(t)}}},compute:{value:function(e){var t,a,i,s,n=e.inputBuffer.getChannelData(0).length,u=e.inputBuffer.numberOfChannels;if(a=i=s=0,u>1)for(s=0;s<n;++s)for(;a<u;++a)i+=(t=e.inputBuffer.getChannelData(a)[s])*t/u;else for(s=0;s<n;++s)i+=(t=e.inputBuffer.getChannelData(0)[s])*t;i=Math.sqrt(i),this._envelope<i?(this._envelope*=this._attackC,this._envelope+=(1-this._attackC)*i):(this._envelope*=this._releaseC,this._envelope+=(1-this._releaseC)*i),this._callback(this._target,this._envelope)}}}),l.prototype.LFO=function(e){e||(e=this.getDefaults()),this.input=t.createGain(),this.output=t.createScriptProcessor(256,1,1),this.activateNode=t.destination,this.frequency=p(e.frequency,this.defaults.frequency.value),this.offset=p(e.offset,this.defaults.offset.value),this.oscillation=p(e.oscillation,this.defaults.oscillation.value),this.phase=p(e.phase,this.defaults.phase.value),this.target=e.target||{},this.output.onaudioprocess=this.callback(e.callback||function(){}),this.bypass=e.bypass||this.defaults.bypass.value},l.prototype.LFO.prototype=Object.create(s,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},defaults:{value:{frequency:{value:1,min:0,max:20,automatable:!1,type:n},offset:{value:.85,min:0,max:22049,automatable:!1,type:n},oscillation:{value:.3,min:-22050,max:22050,automatable:!1,type:n},phase:{value:0,min:0,max:2*Math.PI,automatable:!1,type:n},bypass:{value:!1,automatable:!1,type:u}}},frequency:{get:function(){return this._frequency},set:function(e){this._frequency=e,this._phaseInc=2*Math.PI*this._frequency*this.bufferSize/this.sampleRate}},offset:{get:function(){return this._offset},set:function(e){this._offset=e}},oscillation:{get:function(){return this._oscillation},set:function(e){this._oscillation=e}},phase:{get:function(){return this._phase},set:function(e){this._phase=e}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){e?(this.output.connect(t.destination),this.activateCallback&&this.activateCallback(e)):this.output.disconnect()}},callback:{value:function(e){var t=this;return function(){t._phase+=t._phaseInc,t._phase>2*Math.PI&&(t._phase=0),e(t._target,t._offset+t._oscillation*Math.sin(t._phase))}}}}),l.toString=l.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}}();
},{}],10:[function(require,module,exports) {
var e=1234;function t(t,r,n){for(var i,o=0,a=-1;o<r&&t[o]>n/2;)o++;if(o>=r)return 0;for(;o<r&&(i=t[o])<e;)i>=n/2?-1==a&&(a=o):a=-1,o++;return-1==a&&(a=o),o==r?0:0==a?0:a}function r(e){var t=e.createAnalyser();return t.fftSize=1024,t}function n(e,r){var n=new Uint8Array(r.width),i=r.getContext("2d");return function(){var o=r.width,a=r.height;e.getByteTimeDomainData(n),i.fillStyle="hsl(250, 20%, 20%)",i.fillRect(0,0,o,a),i.lineWidth=1,i.strokeStyle="white",i.beginPath();var f=o/(e.fftSize/2),u=t(n,o,a);0==u&&(u=1);for(var c=u,l=0;l<o-u;c++,l++)i.lineTo(l,a-f*n[c]);i.stroke()}}function i(e,t){var r=n(e,t);!function e(){r(),requestAnimationFrame(e)}()}module.exports={createNode:r,createRenderFunc:n,renderLoop:i};
},{}],4:[function(require,module,exports) {
"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};require("./main.css");var t=require("./impulses/Basement.m4a"),r=u(t),n=require("./impulses/impulse_guitar.wav"),a=u(n),i=require("./defs"),o=u(i);function u(e){return e&&e.__esModule?e:{default:e}}var c=require("wakit"),d=c.connectAll,m=c.createNodes,s=c.setParams,l=c.paramTimeline,f=c.num,v=c.rand,w=require("tunajs");window.ac||(window.ac=new AudioContext);var p=window,T=p.ac,h=new w(T),y=s(T.createGain(),{gain:1}),g=new h.Convolver({highCut:22050,lowCut:20,dryLevel:.2,wetLevel:.8,level:.5,impulse:r.default,bypass:0}),k=new h.PingPongDelay({wetLevel:.7,feedback:.5,delayTimeLeft:150,delayTimeRight:200}),b=new h.Cabinet({impulsePath:a.default,makeupGain:10}),q=new h.Overdrive({outputGain:.5,drive:.3,curveAmount:.7,algorithmIndex:0}),C=new h.Chorus({rate:5.5,feedback:.8,delay:.045,bypass:0}),R=new h.Phaser({rate:3.2,depth:.3,feedback:.4,stereoPhase:30,baseModulationFrequency:700,bypass:0}),L=s(T.createDynamicsCompressor(),{threshold:0,knee:0,reduction:20,ratio:10,attack:1,release:1});d(R,y),d(b,q,y),d(C,y),d(y,g,k,L,T.destination);var I=require("./osc-scope"),P=I.createNode(T),A=document.querySelector(".scope");I.renderLoop(P,A),y.connect(P);var S=document.querySelector(".mute input[type=checkbox]"),x=document.querySelector(".mute .text");function O(e){switch(e.key){case" ":case"m":S.checked=!S.checked,j()}}function j(){var e=S.checked;x.innerHTML=e?"unmute":"mute",s(y,{gain:e?0:1})}S.addEventListener("change",j),window.document.addEventListener("keydown",O,!1);var G=void 0,M=T.createConstantSource();M.start(),setInterval(function(){if(!(T.currentTime<G)){var e=o.default[2],t={time:T.currentTime,duration:v.inRange(10,20),detune:v.from([0,1200,2400])};F(e,t,M),F(e,{time:T.currentTime+3,duration:v.inRange(10,20),detune:v.from([700,1900])},M),G=t.time+t.duration}},1e3);var V=void 0,_=T.createConstantSource();_.start(),setInterval(function(){if(!(T.currentTime<V)){var t=v.inRange(0,1),r=o.default[t],n={time:T.currentTime,duration:v.inRange(10,20),detune:v.from([0,1200])},a=v.from([b,C,R]);F(r,n,_,a),F(r,e({},n,{detune:n.detune+1}),_,a),V=n.time+n.duration}},500);var D=void 0,E=T.createConstantSource();E.start(),setInterval(function(){if(!(T.currentTime<G)){var e=o.default[3],t={time:T.currentTime,duration:v.inRange(10,20),detune:v.from([0,1200])};F(e,t,M),F(e,{time:T.currentTime+3,duration:v.inRange(10,20),detune:v.from([700,1900])},E),G=t.time+t.duration}},1e3);var N=window.notes={},B=0;function F(e,t,r,n){var a=d(e(t,r),n||v.from([b,C,R])),i=t.duration,o=t.time;a.start(o),a.stop(o+i);var u=++B;N[u]=a,setTimeout(function(){delete N[u]},1e3*i)}setInterval(function(){var e=v.from([0,-200]);M.offset.linearRampToValueAtTime(e,T.currentTime+10)},39e3),setInterval(function(){var e=v.from([0,-200]);_.offset.linearRampToValueAtTime(e,T.currentTime+10)},53e3),setInterval(function(){var e=v.from([0,-200]);E.offset.linearRampToValueAtTime(e,T.currentTime+10)},51e3);
},{"./main.css":6,"./impulses/Basement.m4a":7,"./impulses/impulse_guitar.wav":8,"./defs":9,"wakit":12,"tunajs":13,"./osc-scope":10}]},{},[4], null)
//# sourceMappingURL=src.1597dc6c.map